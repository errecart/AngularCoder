"use strict";(self.webpackChunkErrecart_proyectFinalAngular=self.webpackChunkErrecart_proyectFinalAngular||[]).push([[263],{8263:(ut,b,i)=>{i.r(b),i.d(b,{EnrolledModule:()=>pt});var m=i(6814),I=i(6208),A=i(1303),l=i(4221);const r=(0,l.R7)({source:"Enrolled",events:{"Load Enrolleds":(0,l.uZ)(),"Load Enrolleds Success":(0,l.Ky)(),"Load Enrolleds Failure":(0,l.Ky)(),LoadSubjectOptions:(0,l.uZ)(),LoadSubjectOptionsSucces:(0,l.Ky)(),LoadSubjectOptionsFailure:(0,l.Ky)(),LoadInscriptionsOptions:(0,l.uZ)(),LoadInscriptionsOptionsSuccess:(0,l.Ky)(),LoadInscriptionsOptionsFailure:(0,l.Ky)(),LoadSubjectsOptions:(0,l.uZ)(),LoadSubjectsOptionsSuccess:(0,l.Ky)(),LoadSubjectsOptionsFailure:(0,l.Ky)(),CreateEnrolled:(0,l.Ky)(),CreateEnrolledSuccess:(0,l.Ky)(),CreateEnrolledFailure:(0,l.Ky)()}}),S="enrolled",x=(0,l.Lq)({data:[],inscriptionOptions:[],subjectOptions:[],loading:!1,error:null},(0,l.on)(r.loadEnrolleds,e=>({...e,loading:!0})),(0,l.on)(r.loadEnrolledsSuccess,(e,n)=>({...e,data:n.data,loading:!1})),(0,l.on)(r.loadEnrolledsFailure,(e,n)=>({...e,error:n.error,loading:!1})),(0,l.on)(r.loadInscriptionsOptions,e=>e),(0,l.on)(r.loadInscriptionsOptionsSuccess,(e,n)=>({...e,inscriptionOptions:n.data})),(0,l.on)(r.loadInscriptionsOptionsFailure,(e,n)=>({...e,error:n.error,loading:!1})),(0,l.on)(r.loadSubjectOptions,e=>e),(0,l.on)(r.loadSubjectsOptionsSuccess,(e,n)=>({...e,subjectOptions:n.data})),(0,l.on)(r.loadSubjectsOptionsFailure,(e,n)=>({...e,error:n.error,loading:!1}))),D=(0,l.Tz)({name:S,reducer:x}),O=(0,l.ZF)(S),$=(0,l.P1)(O,e=>e.data),L=(0,l.P1)(O,e=>e.inscriptionOptions),Y=(0,l.P1)(O,e=>e.subjectOptions);var p=i(6223),t=i(5879),h=i(7700),y=i(2296),j=i(5683),N=i(8525),K=i(3680);function J(e,n){if(1&e&&(t.TgZ(0,"mat-option",8),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.AsE(" ",o.name," - ",t.lcZ(2,3,o.price)," ")}}function Q(e,n){if(1&e&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.name+" "+o.lastname," ")}}let B=(()=>{class e{constructor(o,s){this.store=o,this.matDialogRef=s,this.inscriptionIdControl=new p.NI(null,p.kI.required),this.subjectIdControl=new p.NI(null,p.kI.required),this.enrolledForm=new p.cw({inscriptionId:this.inscriptionIdControl,subjectId:this.subjectIdControl}),this.inscriptionOptions$=this.store.select(L),this.subjectOptions$=this.store.select(Y)}ngOnInit(){this.store.dispatch(r.loadInscriptionsOptions()),this.store.dispatch(r.loadSubjectOptions())}submit(){this.enrolledForm.invalid?this.enrolledForm.markAllAsTouched():(this.store.dispatch(r.createEnrolled({data:this.enrolledForm.getRawValue()})),this.matDialogRef.close())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.yh),t.Y36(h.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-enrolled-dialog"]],decls:21,vars:8,consts:[["mat-dialog-content",""],[1,"flex","flex-column"],["mat-dialog-title",""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-action",""],["type","submit","mat-button","",3,"click"],["mat-button","","mat-dialog-close",""],[3,"value"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"form",1)(2,"h1",2),t._uU(3,"Enrolled"),t.qZA(),t.TgZ(4,"mat-form-field")(5,"mat-label"),t._uU(6,"Subject"),t.qZA(),t.TgZ(7,"mat-select",3),t.YNc(8,J,3,5,"mat-option",4),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12,"Inscription"),t.qZA(),t.TgZ(13,"mat-select",3),t.YNc(14,Q,2,2,"mat-option",4),t.ALo(15,"async"),t.qZA()()()(),t.TgZ(16,"div",5)(17,"button",6),t.NdJ("click",function(){return s.submit()}),t._uU(18,"Send"),t.qZA(),t.TgZ(19,"button",7),t._uU(20,"Cancel"),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("formControl",s.subjectIdControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,4,s.subjectOptions$)),t.xp6(5),t.Q6J("formControl",s.inscriptionIdControl),t.xp6(1),t.Q6J("ngForOf",t.lcZ(15,6,s.inscriptionOptions$)))},dependencies:[m.sg,y.lW,p._Y,p.JJ,p.JL,p.oH,j.KE,j.hX,h.ZT,h.uh,h.xY,N.gD,K.ey,m.Ov,m.H9],encapsulation:2}),e})();var M=i(274),R=i(5619),G=i(1631),z=i(8180),f=i(7398),E=i(6062),F=i(9862);let H=(()=>{class e{constructor(o){this.httpClient=o,this._enrolled$=new R.X([]),this.enrolled$=this._enrolled$.asObservable()}deleteEnrolledById(o){this.httpClient.delete(E.a.baseApiUrl+"/enrolled/"+o).pipe((0,G.z)(()=>this.enrolled$.pipe((0,z.q)(1),(0,f.U)(s=>s.filter(u=>u.id!==o))))).subscribe({next:s=>this._enrolled$.next(s)})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(F.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var W=i(617),d=i(5313),w=i(9607);function X(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1," Id: "),t.qZA())}function P(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.id,"")}}function q(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1," Inscription: "),t.qZA())}function V(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.inscription.name?o.inscription.name+" "+o.inscription.lastname:"--"," ")}}function k(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Subject:"),t.qZA())}function _(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.subject.name)}}function tt(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Total:"),t.qZA())}function et(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,o.subject.price))}}function ot(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1," Action"),t.qZA())}function nt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",14)(1,"button",15),t.NdJ("click",function(){const g=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.delete(g))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function lt(e,n){1&e&&t._UZ(0,"tr",16)}function it(e,n){1&e&&t._UZ(0,"tr",17)}const rt=function(){return[]};let st=(()=>{class e{constructor(o,s,u,g){this.store=o,this.matDialog=s,this.notification=u,this.enrolledService=g,this.displayedColumns=["id","inscription","subject","total","action"],this.enrolled$=this.store.select($)}AddDialog(){this.matDialog.open(B)}ngOnInit(){this.store.dispatch(r.loadEnrolleds())}delete(o){confirm("Are you sure you want to eliminate this enrolled?")&&this.enrolledService.deleteEnrolledById(o.id)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.yh),t.Y36(h.uw),t.Y36(M.g),t.Y36(H))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-enrolled"]],decls:26,vars:6,consts:[["mat-flat-button","","color","primary","type","button",1,"m-5","createC",3,"click"],["appTitle",""],[1,"table"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","inscription"],["matColumnDef","subject"],["matColumnDef","total"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return s.AddDialog()}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA(),t._uU(3," New Enrolled\n"),t.qZA(),t.TgZ(4,"h2",1),t._uU(5,"Enrolled"),t.qZA(),t.TgZ(6,"div",2)(7,"table",3),t.ALo(8,"async"),t.ynx(9,4),t.YNc(10,X,2,0,"th",5),t.YNc(11,P,2,1,"td",6),t.ynx(12,7),t.YNc(13,q,2,0,"th",5),t.YNc(14,V,2,1,"td",6),t.BQk(),t.ynx(15,8),t.YNc(16,k,2,0,"th",5),t.YNc(17,_,2,1,"td",6),t.BQk()(),t.ynx(18,9),t.YNc(19,tt,2,0,"th",5),t.YNc(20,et,3,3,"td",6),t.BQk(),t.ynx(21,10),t.YNc(22,ot,2,0,"th",5),t.YNc(23,nt,4,0,"td",6),t.BQk(),t.YNc(24,lt,1,0,"tr",11),t.YNc(25,it,1,0,"tr",12),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("dataSource",t.lcZ(8,3,s.enrolled$)||t.DdM(5,rt)),t.xp6(17),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[y.lW,y.RK,W.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,w.M,m.Ov,m.H9],styles:[".table[_ngcontent-%COMP%]{margin-left:2rem;width:70vw}h2[_ngcontent-%COMP%]{margin-left:2rem}"]}),e})(),at=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,A.Bz.forChild([{path:"",component:st}]),A.Bz]}),e})();var c=i(7483),C=i(6328),Z=i(6306),v=i(2096),ct=i(783);let dt=(()=>{class e{constructor(o,s,u,g){this.actions$=o,this.httpClient=s,this.inscirptionService=u,this.store=g,this.loadEnrolleds$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(r.loadEnrolleds),(0,C.b)(()=>this.getEnrolledDB().pipe((0,f.U)(a=>r.loadEnrolledsSuccess({data:a})),(0,Z.K)(a=>(0,v.of)(r.loadEnrolledsFailure({error:a}))))))),this.loadInscriptionOptions$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(r.loadInscriptionsOptions),(0,C.b)(()=>this.getInscriptionOptions().pipe((0,f.U)(a=>r.loadInscriptionsOptionsSuccess({data:a})),(0,Z.K)(a=>(0,v.of)(r.loadInscriptionsOptionsFailure({error:a}))))))),this.loadSubjectOptions$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(r.loadSubjectOptions),(0,C.b)(()=>this.getSubjectsOptions().pipe((0,f.U)(a=>r.loadSubjectsOptionsSuccess({data:a})),(0,Z.K)(a=>(0,v.of)(r.loadInscriptionsOptionsFailure({error:a}))))))),this.createEnrolled$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(r.createEnrolled),(0,C.b)(a=>this.createEnrolled(a.data).pipe((0,f.U)(T=>r.createEnrolledSuccess({data:T})),(0,Z.K)(T=>(0,v.of)(r.createEnrolledFailure({error:T}))))))),this.createEnrolledSucces$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(r.createEnrolledSuccess),(0,f.U)(()=>this.store.dispatch(r.loadEnrolleds()))),{dispatch:!1})}getEnrolledDB(){return this.httpClient.get(E.a.baseApiUrl+"/enrolled?_expand=subject&_expand=inscription")}getInscriptionOptions(){return this.httpClient.get(E.a.baseApiUrl+"/inscriptions")}getSubjectsOptions(){return this.httpClient.get(E.a.baseApiUrl+"/subjects")}createEnrolled(o){return this.httpClient.post(E.a.baseApiUrl+"/enrolled",o)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(c.eX),t.LFG(F.eN),t.LFG(ct.C),t.LFG(l.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),pt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,I.m,at,l.Aw.forFeature(D),c.sQ.forFeature([dt])]}),e})()}}]);