"use strict";(self.webpackChunkErrecart_proyectFinalAngular=self.webpackChunkErrecart_proyectFinalAngular||[]).push([[694],{9694:(ft,_,i)=>{i.r(_),i.d(_,{StudentsModule:()=>pt});var u=i(6814),q=i(6208),d=i(1303),C=i(7398),r=i(6223),c=i(7700),t=i(5879),g=i(2296),Z=i(5683),w=i(2032),x=i(9607),Y=i(8525),F=i(3680);function J(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"This field is required"),t.qZA())}function D(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The name must be greater than 3 characters"),t.qZA())}function k(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required"),t.qZA())}function M(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The last-name must be greater than 5 characters"),t.qZA())}function Q(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The last-name must not exceed 12 characters"),t.qZA())}function E(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required"),t.qZA())}function $(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The min age required is of 15 years"),t.qZA())}function O(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required"),t.qZA())}function L(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The password must be greater than 8 characters"),t.qZA())}function B(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The password must not exceed 16 characters"),t.qZA())}function R(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required"),t.qZA())}function P(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,'This field is for emails only, it required a "'),t.TgZ(2,"b"),t._uU(3,"@"),t.qZA(),t._uU(4,'"'),t.qZA())}function z(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The email must be greater than 8 characters excluding "),t.TgZ(2,"b"),t._uU(3,"@email.com..."),t.qZA()())}let b=(()=>{class e{constructor(n,o){this.dialogRef=n,this.data=o,this.nameControl=new r.NI("",[r.kI.required,r.kI.minLength(3)]),this.lastnameControl=new r.NI("",[r.kI.required,r.kI.minLength(5),r.kI.maxLength(12)]),this.ageControl=new r.NI(null,[r.kI.required,r.kI.min(15)]),this.passwordControl=new r.NI("",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(16)]),this.emailControl=new r.NI("",[r.kI.required,r.kI.email,r.kI.minLength(10)]),this.roleControl=new r.NI(null,[r.kI.required]),this.formModel=new r.cw({name:this.nameControl,lastname:this.lastnameControl,age:this.ageControl,password:this.passwordControl,email:this.emailControl,role:this.roleControl}),this.data&&(this.editStudent=this.data,this.nameControl.setValue(this.data.name),this.lastnameControl.setValue(this.data.lastname),this.passwordControl.setValue(this.data.password),this.ageControl.setValue(this.data.age),this.emailControl.setValue(this.data.email),this.roleControl.setValue(this.data.role))}submit(){if(this.formModel.invalid)this.formModel.markAllAsTouched();else{const n={...this.formModel.value};this.editStudent&&(n.token=this.editStudent.token),this.dialogRef.close(this.formModel.value)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.so),t.Y36(c.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:50,vars:16,consts:[["mat-dialog-title","","appTitle",""],["mat-dialog-content",""],[1,"formList",3,"formGroup"],["autocomplete","off","formControlName","name","matInput","","type","text","name","name"],[4,"ngIf"],["autocomplete","off","formControlName","lastname","matInput","","type","text","name","lastname"],["autocomplete","off","formControlName","age","matInput","","type","text","name","age"],["autocomplete","off","formControlName","password","matInput","","type","text","name","password"],["autocomplete","off","formControlName","email","matInput","","type","email","name","email"],[3,"formControl"],["value","admin"],["value","student"],["mat-dialog-action",""],["type","submit","mat-button","",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field")(5,"mat-label"),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",3),t.YNc(8,J,2,0,"mat-error",4),t.YNc(9,D,2,0,"mat-error",4),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12,"Last-Name"),t.qZA(),t._UZ(13,"input",5),t.YNc(14,k,2,0,"mat-error",4),t.YNc(15,M,2,0,"mat-error",4),t.YNc(16,Q,2,0,"mat-error",4),t.qZA(),t.TgZ(17,"mat-form-field")(18,"mat-label"),t._uU(19,"Age"),t.qZA(),t._UZ(20,"input",6),t.YNc(21,E,2,0,"mat-error",4),t.YNc(22,$,2,0,"mat-error",4),t.qZA(),t.TgZ(23,"mat-form-field")(24,"mat-label"),t._uU(25,"Password"),t.qZA(),t._UZ(26,"input",7),t.YNc(27,O,2,0,"mat-error",4),t.YNc(28,L,2,0,"mat-error",4),t.YNc(29,B,2,0,"mat-error",4),t.qZA(),t.TgZ(30,"mat-form-field")(31,"mat-label"),t._uU(32,"Email"),t.qZA(),t._UZ(33,"input",8),t.YNc(34,R,2,0,"mat-error",4),t.YNc(35,P,5,0,"mat-error",4),t.YNc(36,z,4,0,"mat-error",4),t.qZA(),t.TgZ(37,"mat-form-field")(38,"mat-label"),t._uU(39,"Role"),t.qZA(),t.TgZ(40,"mat-select",9)(41,"mat-option",10),t._uU(42,"Admin"),t.qZA(),t.TgZ(43,"mat-option",11),t._uU(44,"Student"),t.qZA()()()()(),t.TgZ(45,"div",12)(46,"button",13),t.NdJ("click",function(){return o.submit()}),t._uU(47,"Send"),t.qZA(),t.TgZ(48,"button",14),t._uU(49,"Cancel"),t.qZA()()),2&n&&(t.xp6(1),t.Oqu(o.editStudent?"Edit Student":"Create Student"),t.xp6(2),t.Q6J("formGroup",o.formModel),t.xp6(5),t.Q6J("ngIf",o.nameControl.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.nameControl.hasError("minlength")),t.xp6(5),t.Q6J("ngIf",o.lastnameControl.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.lastnameControl.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",o.lastnameControl.hasError("maxlength")),t.xp6(5),t.Q6J("ngIf",o.ageControl.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.ageControl.hasError("min")),t.xp6(5),t.Q6J("ngIf",o.passwordControl.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.passwordControl.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",o.passwordControl.hasError("maxlength")),t.xp6(5),t.Q6J("ngIf",o.emailControl.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.emailControl.hasError("email")),t.xp6(1),t.Q6J("ngIf",o.emailControl.hasError("minlength")),t.xp6(4),t.Q6J("formControl",o.roleControl))},dependencies:[u.O5,g.lW,r._Y,r.Fj,r.JJ,r.JL,r.oH,r.sg,r.u,Z.KE,Z.hX,Z.TO,w.Nt,c.ZT,c.uh,c.xY,x.M,Y.gD,F.ey],styles:[".formList[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#3f4140;width:400px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:20px}.error[_ngcontent-%COMP%]{color:red;margin-left:2rem}.custom-dialog-container[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow-y:hidden}.mat-dialog-content[_ngcontent-%COMP%]{overflow-y:hidden!important;overflow-x:hidden!important}"]}),e})();var A=i(4155),j=i(5619),S=i(1631),v=i(8180),H=i(4530),f=i(6062),G=i(9862),U=i(274);let y=(()=>{class e{constructor(n,o){this.httpClient=n,this.notification=o,this._students$=new j.X([]),this.students$=this._students$.asObservable()}loadStudent(){this.httpClient.get(f.a.baseApiUrl+"/students").subscribe({next:n=>{this._students$.next(n)},error:()=>{this.notification.showError("Error loading the students")}})}getStudent(){return this.students$}getStudentById(n){return this.httpClient.get(f.a.baseApiUrl+`/students?id=${n}`)}createStudent(n){const o=(0,H.M)(10);this.httpClient.post(f.a.baseApiUrl+"/students",{...n,token:o}).pipe((0,S.z)(s=>this.students$.pipe((0,v.q)(1),(0,C.U)(l=>[...l,s])))).subscribe({next:s=>{this._students$.next(s)}})}updateStudentById(n,o){this.httpClient.put(f.a.baseApiUrl+"/students/"+n,o).subscribe({next:()=>this.loadStudent()})}deleteStudentById(n){this.httpClient.delete(f.a.baseApiUrl+"/students/"+n).pipe((0,S.z)(()=>this.students$.pipe((0,v.q)(1),(0,C.U)(o=>o.filter(s=>s.id!==n))))).subscribe({next:o=>this._students$.next(o)})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(G.eN),t.LFG(U.g))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var I=i(4221),T=i(617),m=i(5313);let X=(()=>{class e{transform(n,...o){return`${n.name} ${n.lastname}`}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"fullNames",type:e,pure:!0}),e})();function V(e,a){1&e&&(t.TgZ(0,"th",11),t._uU(1," Id: "),t.qZA())}function K(e,a){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.id," ")}}function W(e,a){1&e&&(t.TgZ(0,"th",11),t._uU(1," Full Name: "),t.qZA())}function tt(e,a){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.ALo(2,"fullNames"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n)," ")}}function et(e,a){1&e&&(t.TgZ(0,"th",11),t._uU(1," Email: "),t.qZA())}function nt(e,a){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.email," ")}}function ot(e,a){1&e&&(t.TgZ(0,"th",11),t._uU(1," Actions: "),t.qZA())}function at(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",12)(1,"button",13),t.NdJ("click",function(){const l=t.CHM(n).$implicit,h=t.oxw();return t.KtG(h.delete.emit(l))}),t.ALo(2,"async"),t.TgZ(3,"mat-icon"),t._uU(4,"delete"),t.qZA()(),t.TgZ(5,"button",14),t.NdJ("click",function(){const l=t.CHM(n).$implicit,h=t.oxw();return t.KtG(h.edit.emit(l))}),t.ALo(6,"async"),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA()(),t.TgZ(9,"button",15)(10,"mat-icon"),t._uU(11,"visibility"),t.qZA()()()}if(2&e){const n=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("disabled",!t.lcZ(2,3,o.isAdmin$)),t.xp6(4),t.Q6J("disabled",!t.lcZ(6,5,o.isAdmin$)),t.xp6(4),t.Q6J("routerLink",n.id)}}function rt(e,a){1&e&&t._UZ(0,"tr",16)}function it(e,a){1&e&&t._UZ(0,"tr",17)}let st=(()=>{class e{constructor(n){this.store=n,this.displayedColumns=["id","name","email","actions"],this.dataSource=[],this.delete=new t.vpe,this.edit=new t.vpe,this.isAdmin$=this.store.select(A.k6)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(I.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-table"]],inputs:{dataSource:"dataSource"},outputs:{delete:"delete",edit:"edit"},decls:18,vars:3,consts:[["appTitle",""],[1,"table"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["routerLinkActive","router-link-active","mat-icon-button","","color","accent",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Table-Students"),t.qZA(),t.TgZ(2,"div",1)(3,"table",2),t.ynx(4,3),t.YNc(5,V,2,0,"th",4),t.YNc(6,K,2,1,"td",5),t.BQk(),t.ynx(7,6),t.YNc(8,W,2,0,"th",4),t.YNc(9,tt,3,3,"td",5),t.BQk(),t.ynx(10,7),t.YNc(11,et,2,0,"th",4),t.YNc(12,nt,2,1,"td",5),t.BQk(),t.ynx(13,8),t.YNc(14,ot,2,0,"th",4),t.YNc(15,at,12,7,"td",5),t.BQk(),t.YNc(16,rt,1,0,"tr",9),t.YNc(17,it,1,0,"tr",10),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[g.RK,T.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,x.M,d.rH,d.Od,u.Ov,X],styles:[".table[_ngcontent-%COMP%]{margin-left:2rem;width:70vw}h2[_ngcontent-%COMP%]{margin-left:2rem}"]}),e})();const lt=function(){return[]};let mt=(()=>{class e{constructor(n,o,s,l){this.matDialog=n,this.studentService=o,this.notification=s,this.store=l,this.studentService.loadStudent(),this.student=this.studentService.getStudent().pipe((0,C.U)(h=>h.map(N=>({...N,lastname:N.lastname.toUpperCase()})))),this.isAdmin$=this.store.select(A.k6)}createStudent(){this.matDialog.open(b).afterClosed().subscribe({next:n=>{n?this.studentService.createStudent({name:n.name,email:n.email,age:n.age,password:n.password,lastname:n.lastname,role:n.role}):this.notification.showError("Se a cancelado la inscripcion")}})}onEditStudent(n){this.matDialog.open(b,{data:n}).afterClosed().subscribe({next:s=>{s&&this.studentService.updateStudentById(n.id,s)}})}onDeleteStudent(n){confirm(`Are you sure you want to eliminate ${n.name}`),this.studentService.deleteStudentById(n.id)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.uw),t.Y36(y),t.Y36(U.g),t.Y36(I.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-students"]],decls:7,vars:7,consts:[["mat-flat-button","","color","primary","type","button",1,"m-5",3,"disabled","click"],[3,"dataSource","delete","edit"]],template:function(n,o){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.createStudent()}),t.ALo(1,"async"),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA(),t._uU(4," Create Student\n"),t.qZA(),t.TgZ(5,"app-table",1),t.NdJ("delete",function(l){return o.onDeleteStudent(l)})("edit",function(l){return o.onEditStudent(l)}),t.ALo(6,"async"),t.qZA()),2&n&&(t.Q6J("disabled",!t.lcZ(1,2,o.isAdmin$)),t.xp6(5),t.Q6J("dataSource",t.lcZ(6,4,o.student)||t.DdM(6,lt)))},dependencies:[g.lW,T.Hw,st,u.Ov],encapsulation:2}),e})();var p=i(5195);function dt(e,a){if(1&e&&(t.TgZ(0,"mat-card",2)(1,"mat-card-header"),t._UZ(2,"div",3),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA()(),t._UZ(5,"img",4),t.TgZ(6,"mat-card-content")(7,"p"),t._uU(8,"Last-Name: "),t.TgZ(9,"b"),t._uU(10),t.qZA()(),t.TgZ(11,"p"),t._uU(12,"Age: "),t.TgZ(13,"b"),t._uU(14),t.qZA()(),t.TgZ(15,"p"),t._uU(16,"Password: "),t.TgZ(17,"b"),t._uU(18),t.qZA()()()()),2&e){const n=t.oxw();t.xp6(4),t.hij("Students Details: ",n.studentDetail[0].name,""),t.xp6(6),t.Oqu(n.studentDetail[0].lastname),t.xp6(4),t.Oqu(n.studentDetail[0].age),t.xp6(4),t.Oqu(n.studentDetail[0].password)}}let ut=(()=>{class e{constructor(n,o,s){this.activateRoute=n,this.router=o,this.studentService=s,this.studentDetail=[],this.studentId=this.activateRoute.snapshot.params.id}ngOnInit(){Number(this.studentId)?this.studentService.getStudentById(this.studentId).subscribe({next:n=>this.studentDetail=n}):this.router.navigate(["../../../mocks/error404"])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-students-details"]],decls:4,vars:1,consts:[["mat-icon-button","","routerLink",".."],["class","example-card",4,"ngIf"],[1,"example-card"],["mat-card-avatar","",1,"example-header-image"],["mat-card-image","","src","https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png","alt","non-Photo os the student"]],template:function(n,o){1&n&&(t.TgZ(0,"button",0)(1,"mat-icon"),t._uU(2,"arrow_back"),t.qZA()(),t.YNc(3,dt,19,4,"mat-card",1)),2&n&&(t.xp6(3),t.Q6J("ngIf",o.studentDetail))},dependencies:[u.O5,g.RK,T.Hw,p.a8,p.kc,p.dn,p.dk,p.G2,p.n5,d.rH],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}"]}),e})(),ct=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,d.Bz.forChild([{path:"",component:mt},{path:":id",component:ut}]),d.Bz]}),e})(),pt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,q.m,d.Bz,ct]}),e})()}}]);