"use strict";(self.webpackChunkErrecart_proyectFinalAngular=self.webpackChunkErrecart_proyectFinalAngular||[]).push([[134],{1134:(rt,S,a)=>{a.r(S),a.d(S,{SubjectsModule:()=>at});var l=a(6814),I=a(6208),u=a(1303),r=a(6223),d=a(7700),t=a(5879),f=a(2296),h=a(5683),N=a(2032),C=a(9607);function q(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required"),t.qZA())}function Y(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"This field is required"),t.qZA())}function D(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"A complete schedule is needed, example: 2:00hrs"),t.qZA())}function J(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"price need to be higher than USD$10"),t.qZA())}function F(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required"),t.qZA())}function k(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," this field is required"),t.qZA())}function M(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"This field is required"),t.qZA())}let T=(()=>{class e{constructor(o,i){this.dialogRef=o,this.data=i,this.nameControl=new r.NI("",[r.kI.required]),this.timeWControl=new r.NI(null,[r.kI.required,r.kI.minLength(7)]),this.priceControl=new r.NI(null,[r.kI.required,r.kI.min(10)]),this.descriptionControl=new r.NI("",[r.kI.required]),this.imageControl=new r.NI("",[r.kI.required]),this.formSModel=new r.cw({name:this.nameControl,timeW:this.timeWControl,price:this.priceControl,description:this.descriptionControl,image:this.imageControl}),this.data&&(this.editSubject=this.data,this.nameControl.setValue(this.data.name),this.timeWControl.setValue(this.data.timeW),this.priceControl.setValue(this.data.price),this.descriptionControl.setValue(this.data.description),this.imageControl.setValue(this.data.image))}submit(){this.formSModel.invalid?this.formSModel.markAllAsTouched():this.dialogRef.close(this.formSModel.value)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.so),t.Y36(d.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-subjects"]],decls:36,vars:9,consts:[["mat-dialog-content","",1,""],[1,"formSub","flex","flex-column",3,"formGroup"],["mat-dialog-title","","appTitle",""],["autocomplete","off","formControlName","name","matInput","","type","text","name","name"],[4,"ngIf"],["autocomplete","off","formControlName","timeW","matInput","","type","text","name","timeW"],["autocomplete","off","formControlName","price","matInput","","type","text","name","price"],["autocomplete","off","formControlName","image","matInput","","type","text","name","image","placeholder","its has to be a link for the photo"],["matInput","","placeholder","Description of the subject","autocomplete","off","formControlName","description","matInput","","type","text","name","description"],["mat-dialog-action",""],["type","submit","mat-button","",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"form",1)(2,"h1",2),t._uU(3),t.qZA(),t.TgZ(4,"mat-form-field")(5,"mat-label"),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",3),t.YNc(8,q,2,0,"mat-error",4),t.qZA(),t.TgZ(9,"mat-form-field")(10,"mat-label"),t._uU(11,"Time for Week"),t.qZA(),t._UZ(12,"input",5),t.YNc(13,Y,2,0,"mat-error",4),t.YNc(14,D,2,0,"mat-error",4),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-label"),t._uU(17,"Price"),t.qZA(),t._UZ(18,"input",6),t.YNc(19,J,2,0,"mat-error",4),t.YNc(20,F,2,0,"mat-error",4),t.qZA(),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Image"),t.qZA(),t._UZ(24,"input",7),t.YNc(25,k,2,0,"mat-error",4),t.qZA(),t.TgZ(26,"mat-form-field")(27,"mat-label"),t._uU(28,"Description"),t.qZA(),t._UZ(29,"textarea",8),t.YNc(30,M,2,0,"mat-error",4),t.qZA()()(),t.TgZ(31,"div",9)(32,"button",10),t.NdJ("click",function(){return i.submit()}),t._uU(33,"Send"),t.qZA(),t.TgZ(34,"button",11),t._uU(35,"Cancel"),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("formGroup",i.formSModel),t.xp6(2),t.Oqu(i.editSubject?"Edit Subject":"Create Subject"),t.xp6(5),t.Q6J("ngIf",i.nameControl.hasError("required")),t.xp6(5),t.Q6J("ngIf",i.timeWControl.hasError("required")),t.xp6(1),t.Q6J("ngIf",i.timeWControl.hasError("minlength")),t.xp6(5),t.Q6J("ngIf",i.priceControl.hasError("min")),t.xp6(1),t.Q6J("ngIf",i.priceControl.hasError("required")),t.xp6(5),t.Q6J("ngIf",i.priceControl.hasError("required")),t.xp6(5),t.Q6J("ngIf",i.timeWControl.hasError("required")))},dependencies:[l.O5,f.lW,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,h.KE,h.hX,h.TO,N.Nt,d.ZT,d.uh,d.xY,C.M],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:20px}"]}),e})();var Z=a(4155),$=a(5619),_=a(1631),x=a(8180),A=a(7398),Q=a(4530),b=a(6062),w=a(9862),v=a(274);let y=(()=>{class e{constructor(o,i){this.httpClient=o,this.notification=i,this._subject$=new $.X([]),this.subject$=this._subject$.asObservable()}loadSubject(){this.httpClient.get(b.a.baseApiUrl+"/subjects").subscribe({next:o=>{this._subject$.next(o)},error:()=>{this.notification.showError("Error loading the Subjects")}})}getSubject(){return this.subject$}getSubjectById(o){return this.httpClient.get(b.a.baseApiUrl+`/subjects?id=${o}`)}createSubject(o){const i=(0,Q.M)(5);this.httpClient.post(b.a.baseApiUrl+"/subjects/",{...o,token:i}).pipe((0,_.z)(c=>this.subject$.pipe((0,x.q)(1),(0,A.U)(s=>[...s,c])))).subscribe({next:c=>{this._subject$.next(c)}})}updateSubjectById(o,i){this.httpClient.put(b.a.baseApiUrl+"/subjects/"+o,i).subscribe({next:()=>this.loadSubject()})}deleteSubjectById(o){this.httpClient.delete(b.a.baseApiUrl+"/subjects/"+o).pipe((0,_.z)(()=>this.subject$.pipe((0,x.q)(1),(0,A.U)(i=>i.filter(c=>c.id!==o))))).subscribe({next:i=>this._subject$.next(i)})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(w.eN),t.LFG(v.g))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=a(4221),j=a(617),m=a(5313);function W(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1," Id: "),t.qZA())}function B(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function O(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1," Name: "),t.qZA())}function R(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.name," ")}}function L(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1," Time: "),t.qZA())}function E(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.timeW," ")}}function H(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1," price: "),t.qZA())}function z(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o.price)," ")}}function G(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1," Actions: "),t.qZA())}function P(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",13)(1,"button",14),t.NdJ("click",function(){const s=t.CHM(o).$implicit,g=t.oxw();return t.KtG(g.delete.emit(s))}),t.ALo(2,"async"),t.TgZ(3,"mat-icon"),t._uU(4,"delete"),t.qZA()(),t.TgZ(5,"button",15),t.NdJ("click",function(){const s=t.CHM(o).$implicit,g=t.oxw();return t.KtG(g.edit.emit(s))}),t.ALo(6,"async"),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA()(),t.TgZ(9,"button",16)(10,"mat-icon"),t._uU(11,"visibility"),t.qZA()()()}if(2&e){const o=n.$implicit,i=t.oxw();t.xp6(1),t.Q6J("disabled",!t.lcZ(2,3,i.isAdmin$)),t.xp6(4),t.Q6J("disabled",!t.lcZ(6,5,i.isAdmin$)),t.xp6(4),t.Q6J("routerLink",o.id)}}function X(e,n){1&e&&t._UZ(0,"tr",17)}function K(e,n){1&e&&t._UZ(0,"tr",18)}let V=(()=>{class e{constructor(o){this.store=o,this.displayedColumns=["id","name","timeW","price","actions"],this.dataSource=[],this.delete=new t.vpe,this.edit=new t.vpe,this.isAdmin$=this.store.select(Z.k6)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(U.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-table-subject"]],inputs:{dataSource:"dataSource"},outputs:{delete:"delete",edit:"edit"},decls:22,vars:3,consts:[["appTitle",""],[1,"table"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","timeW"],["matColumnDef","price"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","click"],["routerLinkActive","router-link-active","mat-icon-button","","color","accent",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"h2",0),t._uU(1,"Table-Subjects"),t.qZA(),t.TgZ(2,"div",1)(3,"table",2),t.ynx(4,3),t.YNc(5,W,2,0,"th",4),t.YNc(6,B,2,1,"td",5),t.BQk(),t.ynx(7,6),t.YNc(8,O,2,0,"th",4),t.YNc(9,R,2,1,"td",5),t.BQk(),t.ynx(10,7),t.YNc(11,L,2,0,"th",4),t.YNc(12,E,2,1,"td",5),t.BQk(),t._uU(13," > "),t.ynx(14,8),t.YNc(15,H,2,0,"th",4),t.YNc(16,z,3,3,"td",5),t.BQk(),t.ynx(17,9),t.YNc(18,G,2,0,"th",4),t.YNc(19,P,12,7,"td",5),t.BQk(),t.YNc(20,X,1,0,"tr",10),t.YNc(21,K,1,0,"tr",11),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("dataSource",i.dataSource),t.xp6(17),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[f.RK,j.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,C.M,u.rH,u.Od,l.Ov,l.H9],styles:[".table[_ngcontent-%COMP%]{margin-left:2rem;width:70vw}h2[_ngcontent-%COMP%]{margin-left:2rem}"]}),e})();const tt=function(){return[]};let et=(()=>{class e{constructor(o,i,c,s){this.matDialog=o,this.subjectService=i,this.notification=c,this.store=s,this.subjectService.loadSubject(),this.subject=this.subjectService.getSubject(),this.isAdmin$=this.store.select(Z.k6)}createSubject(){this.matDialog.open(T).afterClosed().subscribe({next:o=>{o?(this.subjectService.createSubject({name:o.name,timeW:o.timeW,price:o.price,description:o.description,image:o.image}),this.notification.showSuccess("Subject success")):this.notification.showError("Se a cancelado la inscripcion")}})}editSubject(o){this.matDialog.open(T,{data:o}).afterClosed().subscribe({next:c=>{c&&this.subjectService.updateSubjectById(o.id,c)}})}deleteSubject(o){confirm(`Are you sure you want to eliminate ${o.name}`)&&this.subjectService.deleteSubjectById(o.id)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.uw),t.Y36(y),t.Y36(v.g),t.Y36(U.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-subjects"]],decls:7,vars:7,consts:[["mat-flat-button","","color","primary","type","button",1,"m-5",3,"disabled","click"],[3,"dataSource","delete","edit"]],template:function(o,i){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.createSubject()}),t.ALo(1,"async"),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA(),t._uU(4," Create Subject\n"),t.qZA(),t.TgZ(5,"app-table-subject",1),t.NdJ("delete",function(s){return i.deleteSubject(s)})("edit",function(s){return i.editSubject(s)}),t.ALo(6,"async"),t.qZA()),2&o&&(t.Q6J("disabled",!t.lcZ(1,2,i.isAdmin$)),t.xp6(5),t.Q6J("dataSource",t.lcZ(6,4,i.subject)||t.DdM(6,tt)))},dependencies:[f.lW,j.Hw,V,l.Ov],encapsulation:2}),e})();var p=a(5195);function ot(e,n){if(1&e&&(t.TgZ(0,"mat-card",2)(1,"mat-card-header"),t._UZ(2,"div",3),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA()(),t._UZ(5,"img",4),t.TgZ(6,"mat-card-content")(7,"p"),t._uU(8,"Last-Name: "),t.TgZ(9,"b"),t._uU(10),t.qZA()()()()),2&e){const o=t.oxw();t.xp6(4),t.hij("Subject Details: ",o.subjectDetail[0].name,""),t.xp6(1),t.s9C("src",o.subjectDetail[0].image,t.LSH),t.xp6(5),t.Oqu(o.subjectDetail[0].description)}}let it=(()=>{class e{constructor(o,i,c){this.activateRoute=o,this.router=i,this.subjectService=c,this.subjectDetail=[],this.displayedColumns=["id","name","description"],this.subjectId=this.activateRoute.snapshot.params.id}ngOnInit(){Number(this.subjectId)?this.subjectService.getSubjectById(this.subjectId).subscribe({next:o=>this.subjectDetail=o}):this.router.navigate(["../../../mocks/error404"])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-subject-details"]],decls:6,vars:1,consts:[["mat-icon-button","","routerLink",".."],["class","example-card",4,"ngIf"],[1,"example-card"],["mat-card-avatar","",1,"example-header-image"],["mat-card-image","","alt","non-Photo os the student",3,"src"]],template:function(o,i){1&o&&(t.TgZ(0,"button",0)(1,"mat-icon"),t._uU(2,"arrow_back"),t.qZA()(),t.TgZ(3,"h2"),t._uU(4,"Subject's Details"),t.qZA(),t.YNc(5,ot,11,3,"mat-card",1)),2&o&&(t.xp6(5),t.Q6J("ngIf",i.subjectDetail))},dependencies:[l.O5,f.RK,j.Hw,p.a8,p.kc,p.dn,p.dk,p.G2,p.n5,u.rH],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}"]}),e})(),nt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,u.Bz.forChild([{path:"",component:et},{path:":id",component:it}]),u.Bz]}),e})(),at=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,I.m,nt]}),e})()}}]);